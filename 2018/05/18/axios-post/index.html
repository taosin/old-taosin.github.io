<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="description" content="Nix的小黑屋">
  <meta name="keywords" content="">
  
    
<title>使用axios发送POST请求时后端获取不到参数的问题 | Nix的小黑屋</title>
<link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-96088772-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-96088772-1');
</script>
</head>

<body>
	
	<header id="header">
	<a href="/" title="Nix_____'s Blog">Nix_____'s Blog</a>
</header>
	<div className="container" id="container">
		<main class="blogs" id="blog">
	<div class="row justify-content-center">
		
			<div class="post col-xl-8 col-lg-10 col-md-10 col-sm-10">
  <div class="card">
    <div class="card-body">
      <div class="card-title">
        <h3 class="date">May 18,2018 / Fri</h3>
        <h1 class="title">使用axios发送POST请求时后端获取不到参数的问题</h1>
        <div class="article-tags">
          
          <a class='tag badge badge-pill'>前端</a>
          
        </div>
      </div>
      <p class="card-text">
        <p>在使用 <code>vue2</code> + <code>axios</code> + <code>node.js</code> + <code>express</code> 开发管理后台时，遇到了<em>axios发送POST请求时后端获取不到参数的问题</em> ，查阅资料许久，还是未找到解决办法，无奈之下，喝一口凉水，歇息一番，继续寻求良方。</p>
<p>终于，皇天不负有心人，<a href="https://zhuanlan.zhihu.com/p/27498996" target="_blank" rel="noopener">在这里</a>，还是找到了解决的办法。<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">axios.defaults.headers.post[<span class="string">'Content-Type'</span>] = <span class="string">'application/x-www-form-urlencoded'</span>;</span><br></pre></td></tr></table></figure></p>
<p>由此看出，<code>axios</code> 在 <code>POST</code> 提交数据时也是使用的这种方式，在 <code>java</code> 和 <code>php</code> 可以获取到对应的 <code>request</code> 原始流数据获取到对应的值并将其序列化.</p>
<p>但是这样的方式在 <code>express</code> 服务后端并不能获取到数据，因此 <code>express</code> 中使用的是 <code>body-parser</code> 去格式化前台传来的数据，具体实现看代码：<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//server</span></span><br><span class="line"></span><br><span class="line"><span class="meta">'use strict'</span></span><br><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="keyword">var</span> powerexpress = <span class="built_in">require</span>(<span class="string">'power-express'</span>)(express)</span><br><span class="line"><span class="keyword">var</span> authority = <span class="built_in">require</span>(<span class="string">'./filter/authority'</span>)</span><br><span class="line"><span class="keyword">var</span> app = powerexpress()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 body-parse 格式化数据</span></span><br><span class="line"><span class="keyword">var</span> bodyParser = <span class="built_in">require</span>(<span class="string">'body-parser'</span>)</span><br><span class="line">app.use(bodyParser.urlencoded(&#123;</span><br><span class="line">    extended: <span class="literal">true</span></span><br><span class="line">&#125;))</span><br><span class="line">app.use(bodyParser.json())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Server = <span class="built_in">require</span>(<span class="string">'./server'</span>)</span><br><span class="line"><span class="keyword">var</span> cookieParser = <span class="built_in">require</span>(<span class="string">'cookie-parser'</span>)</span><br><span class="line">app.use(cookieParser())</span><br><span class="line"><span class="built_in">require</span>(<span class="string">'./controllers/routes'</span>)(app)</span><br><span class="line"><span class="keyword">var</span> appServer = <span class="keyword">new</span> Server(app)</span><br><span class="line">appServer.start()</span><br></pre></td></tr></table></figure></p>

      </p>
    </div>
    <div class="card-footer d-flex justify-content-between">
      
      <a href="/2018/05/20/fe-interview-js/">
        上一篇：前端面试基础之JavaScript篇
      </a>
      
      
      <a href="/2018/05/17/arr-yes-or-no/" class="btn btn-link">
        下一篇：判断一个对象是否为数组
      </a>
      
    </div>
  </div>
</div>
		
	</div>
</main>

	</div>
	
</body>
</html>